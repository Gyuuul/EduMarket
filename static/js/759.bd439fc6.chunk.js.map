{"version":3,"file":"static/js/759.bd439fc6.chunk.js","mappings":"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","sources":["pages/post/PostUpload.jsx"],"sourcesContent":["import React, { useState,useRef } from 'react'\r\nimport { useNavigate } from 'react-router-dom';\r\nimport axios from 'axios';\r\nimport styled from 'styled-components';\r\nimport Common from '../../components/common/Common'\r\nimport { URL } from '../../lib/apis/constant/path';\r\nimport album from '../../assets/icons/icon/Image-button.webp'\r\nimport deleteBtn from '../../assets/icons/icon/delete-button.webp'\r\n\r\nexport default function PostUpload() {\r\n    const userToken = localStorage.getItem('Access Token');\r\n    const [content, setContent]= useState('');\r\n    const [showImage, setShowImage]= useState([]);\r\n    const [postImage, setPostImage]= useState([]);\r\n    const [imageMessage, setImageMessage]= useState('');\r\n    const [uploadMessage, setUploadMessage]= useState('');\r\n    const inputRef= useRef(null);\r\n    const navigate= useNavigate();\r\n    const data = {\r\n        post: {\r\n            content: '',\r\n            image: '',\r\n        },\r\n    };\r\n    async function UploadImage(file){\r\n        const formData= new FormData();\r\n        formData.append('image', file);\r\n\r\n        const res= await axios.post(`${URL}/image/uploadfile`, formData);\r\n        const imageName = `${URL}/` + res.data.filename;\r\n\r\n        return imageName;\r\n    }\r\n        const ViewImage= (e)=>{\r\n        let fileUrl= [...showImage];\r\n        let files= [...postImage]\r\n        const fileArray= e.target.files;\r\n        const maxSize= 10 * 1024 * 1024;\r\n        let TotalSize= 0;\r\n\r\n        for(let i=0; i< fileArray.length; i++){\r\n            TotalSize += fileArray[i].size;\r\n\r\n            if(TotalSize> maxSize){\r\n                setImageMessage(' 이미지 크기는 10MB 제한입니다.');\r\n            }else{\r\n                const createUrl= window.URL.createObjectURL(fileArray[i]);\r\n                fileUrl.push(createUrl);\r\n                files.push(fileArray[i]);\r\n            }\r\n        }\r\n\r\n        if(fileUrl.length > 3){\r\n            setImageMessage('사진은 최대 3장까지 업로드 할 수 있습니다.');\r\n            setUploadMessage('');\r\n            fileUrl= fileUrl.slice(0,3);\r\n            files= files.slice(0,3);\r\n        }else if(fileUrl.length <= 3){\r\n            setImageMessage('');\r\n        }\r\n        setShowImage(fileUrl);\r\n        setPostImage(files);\r\n    }\r\n\r\n    /* 이미지 삭제함수 */\r\n    const DeleteImage= (id)=> {\r\n        setShowImage(\r\n            showImage.filter((_, index)=> {\r\n                return index !== id;\r\n            })\r\n        );\r\n\r\n        setPostImage(\r\n            postImage.filter((_, index)=> {\r\n                return index !== id;\r\n            })\r\n        );\r\n    }\r\n\r\n     /* 게시글 업로드 함수 */\r\n    async function Upload(){\r\n        const imageList= [];\r\n        \r\n        for(let i= 0; i< postImage?.length; i++){\r\n            imageList.push(UploadImage(postImage[i]));\r\n        }\r\n\r\n        const List= await Promise.all(imageList);\r\n\r\n        data.post.image = List.join(',');\r\n        data.post.content = content;\r\n\r\n        if(data.post.content == '' && data.post.image == ''){\r\n            setUploadMessage('글 또는 사진을 입력해주세요.')\r\n        }\r\n\r\n        try{\r\n            const res= await axios.post(`${URL}/post`, data, {\r\n                headers: {\r\n                    Authorization: `Bearer ${userToken}`,\r\n                    'Content-type': 'application/json',\r\n                },\r\n            });\r\n\r\n            navigate(`/post/feed`);\r\n        }catch(error){\r\n            console.log(error);\r\n        }\r\n    }\r\n\r\n    const page= (\r\n        <UploadWrap>\r\n            <UploadDiv>\r\n                <Wrap>\r\n                    <Title>\r\n                        <h2>POST</h2>\r\n                    </Title>\r\n                    <Description> 글과 사진을 자유롭게 공유할 수 있습니다. </Description>\r\n                    \r\n                    <Div>\r\n                        <Label htmlFor='post'/>\r\n                        <TextArea\r\n                            name='post'\r\n                            id= 'post'\r\n                            placeholder='내용을 입력해주세요.'\r\n                            value={content}\r\n                            onChange={(e) => {\r\n                                setContent(e.target.value);\r\n                                if(e.target.value.length > 0){\r\n                                    setUploadMessage('');\r\n                                }\r\n                            }}\r\n                        />\r\n                        <Ul>\r\n                            {showImage.map((image, id)=> {\r\n                                return(\r\n                                    <Li key={id}>\r\n                                        <img key={id} src={image} alt=\"게시글 이미지\"/>\r\n                                        <DeleteButton\r\n                                            onClick= {()=> {\r\n                                                return DeleteImage(id);\r\n                                            }}\r\n                                            aria-label=\"삭제 버튼\">\r\n                                            <img src={deleteBtn} alt=\"삭제\" />\r\n                                        </DeleteButton>\r\n                                    </Li>\r\n                                )\r\n                            })}\r\n                        </Ul>\r\n                        <>\r\n                            {uploadMessage === '' \r\n                            ? \r\n                            (<Alert>{imageMessage}</Alert>)\r\n                            :\r\n                            (<Alert>{uploadMessage}</Alert>)    \r\n                            }\r\n                        </>\r\n                        <ImageDiv>\r\n                            <Button onClick={Upload} aria-label=\"게시글 등록\">게시글 등록하기</Button>\r\n                            <Label htmlFor=\"input-file\">\r\n                                <img src={album} alt=\"앨범 이미지\" />\r\n                            </Label>\r\n                            <Input\r\n                                id=\"input-file\"\r\n                                name=\"PostImg\"\r\n                                type=\"file\"\r\n                                accept=\".png, .jpg, .jpeg\"\r\n                                onChange={(e) => {\r\n                                    ViewImage(e);\r\n                                    setUploadMessage('');\r\n                                }}\r\n                                value={data.post.image}\r\n                                ref={inputRef}\r\n                            />\r\n                        </ImageDiv>\r\n                    </Div>\r\n                </Wrap>\r\n            </UploadDiv>\r\n        </UploadWrap>\r\n    )\r\n    return (\r\n        <>\r\n            <Common page={page} />\r\n        </>\r\n    )\r\n}\r\nconst UploadWrap= styled.div`\r\n    padding: 200px 0;\r\n    background-color: #dae1e6;\r\n`\r\nconst UploadDiv= styled.div`\r\n    max-width: 1400px;\r\n    margin: 0 auto;\r\n`\r\nconst Wrap= styled.div`\r\n    padding: 40px 80px 90px;\r\n    border: 1px solid rgba(0,0,0,0.09);\r\n    border-radius: 15px;\r\n    background-color: #ffff;\r\n    box-shadow: 0 1px 4px rgba(0,0,0,0.04);\r\n`\r\nconst Title= styled.div`\r\n    padding: 50px 0 0px;\r\n    border: none;\r\n    font-size: 40px;\r\n    text-align: center;\r\n    color: #2b2b2b;\r\n    &h2{\r\n        display: inline-block;\r\n        color: #2b2b2b;\r\n    }\r\n`\r\nconst Description= styled.h3`\r\n    margin-bottom: 30px;\r\n    font-size: 20px;\r\n    text-align: center;\r\n    color: #868686;\r\n`\r\nconst Div= styled.div`\r\n    display: flex;\r\n    flex-direction: column;\r\n    align-items: center;\r\n    justify-content: center;\r\n`\r\nconst Alert= styled.p`\r\n    margin-top: 20px;\r\n    margin-bottom: -10px;\r\n    margin-left: -60px;\r\n    font-size: 14px;\r\n    color: #C63D2F;\r\n`\r\nconst ImageDiv= styled.div`\r\n    display: flex;\r\n    gap: 20px;\r\n    margin-top: 30px;\r\n`\r\nconst Label= styled.label`\r\n    & img {\r\n        width: 60px;\r\n        height: 60px;\r\n        border-radius: 7px;\r\n    }\r\n`\r\nconst Input= styled.input`\r\n    display: none;\r\n`\r\nconst TextArea= styled.textarea`\r\n    width: 70%;\r\n    height: 500px;\r\n    margin: 0 auto;\r\n    padding: 16px;\r\n    font-family: \"Noto_Sans_KR-400\";\r\n    font-size: 20px;\r\n    resize: none;\r\n`\r\nconst Ul= styled.ul`\r\n    display: flex;\r\n    gap: 15px;\r\n    margin-top: 30px;\r\n`\r\nconst Li= styled.li`\r\n    border: 1px solid rgba(0,0,0,0.09);\r\n    border-radius: 10px;\r\n    box-shadow: 0 1px 4px rgba(0,0,0,0.04);\r\n    & img {\r\n        width: 280px;\r\n        height: 180px;\r\n        object-fit: cover;\r\n    }\r\n`\r\nconst DeleteButton= styled.button`\r\n    & img {\r\n        position: absolute;\r\n        width: 32px;\r\n        height: 32px;\r\n        margin-top: -190px;\r\n        margin-left: -20px;\r\n        border-radius: 50px;\r\n        background-color: #475569;\r\n        cursor: pointer;\r\n    }\r\n`\r\nconst Button= styled.button`\r\n    width: 400px;\r\n    height: 60px;\r\n    border: 1px solid #C63D2F;\r\n    border-radius: 5px;\r\n    background: #C63D2F;\r\n    font-size: 15px;\r\n    font-weight: 400;\r\n    color: #fff;\r\n    line-height: 60px;\r\n    cursor: pointer;\r\n`"],"names":["PostUpload","userToken","localStorage","getItem","_useState","useState","_useState2","_slicedToArray","content","setContent","_useState3","_useState4","showImage","setShowImage","_useState5","_useState6","postImage","setPostImage","_useState7","_useState8","imageMessage","setImageMessage","_useState9","_useState10","uploadMessage","setUploadMessage","inputRef","useRef","navigate","useNavigate","data","post","image","UploadImage","_x","_UploadImage","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","file","formData","res","imageName","wrap","_context","prev","next","FormData","append","axios","concat","URL","sent","filename","abrupt","stop","_Upload","_callee2","imageList","i","List","_context2","length","push","Promise","all","join","headers","Authorization","t0","console","log","page","_jsx","UploadWrap","children","UploadDiv","_jsxs","Wrap","Title","Description","Div","Label","htmlFor","TextArea","name","id","placeholder","value","onChange","e","target","Ul","map","Li","src","alt","DeleteButton","onClick","filter","_","index","DeleteImage","deleteBtn","_Fragment","Alert","ImageDiv","Button","album","Input","type","accept","fileUrl","_toConsumableArray","files","fileArray","TotalSize","size","createUrl","window","createObjectURL","slice","ViewImage","ref","Common","styled","div","_templateObject","_taggedTemplateLiteral","_templateObject2","_templateObject3","_templateObject4","h3","_templateObject5","_templateObject6","p","_templateObject7","_templateObject8","label","_templateObject9","input","_templateObject10","textarea","_templateObject11","ul","_templateObject12","li","_templateObject13","button","_templateObject14","_templateObject15"],"sourceRoot":""}